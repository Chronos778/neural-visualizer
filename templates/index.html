<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Interactive neural network visualizer for handwritten digit recognition.">
    <meta name="theme-color" content="#1C1B1A">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸ§ </text></svg>">
    <title>Neural Network Digit Recognizer</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display&family=IBM+Plex+Mono:wght@400;500;600;700&family=DM+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
</head>
<body>

    <!-- â•â•â• SHELL â•â•â• -->
    <div class="shell">

        <!-- â”€â”€ TOP STRIP â”€â”€ -->
        <header class="strip">
            <div class="strip__left">
                <span class="strip__mark">â—ˆ</span>
                <h1 class="strip__title">Neural Network Visualizer</h1>
            </div>
            <div class="strip__right">
                <span class="strip__led" id="statusLed"></span>
                <span class="strip__status" id="statusText">STANDBY</span>
            </div>
        </header>

        <!-- â”€â”€ WORKBENCH (split layout) â”€â”€ -->
        <main class="workbench">

            <!-- LEFT PANE: Input -->
            <div class="pane pane--input">
                <div class="pane__head">
                    <span class="pane__tag">INPUT</span>
                    <span class="pane__sub">Handwritten 0â€“9</span>
                </div>
                <div class="drawing-frame">
                    <canvas id="drawingCanvas" width="280" height="280"></canvas>
                </div>
                <div class="toolbar">
                    <button id="clearBtn" class="tb-btn">
                        <span class="tb-btn__icon">âœ•</span> Clear
                    </button>
                    <div class="tb-slider">
                        <label for="brushSize">Brush</label>
                        <input type="range" id="brushSize" min="10" max="40" value="20" aria-label="Brush size">
                        <span id="brushSizeValue" class="tb-slider__val">20</span>
                    </div>
                    <button id="predictBtn" class="tb-btn tb-btn--run">
                        <span class="tb-btn__icon">â–¶</span> Predict
                    </button>
                </div>
                <!-- 28x28 thumbnail -->
                <details class="preview-toggle">
                    <summary>28Ã—28 downsampled</summary>
                    <div class="pixel-preview" id="pixelPreview"></div>
                </details>
            </div>

            <!-- DIVIDER -->
            <div class="divider"></div>

            <!-- RIGHT PANE: Readout + Network -->
            <div class="pane pane--output">

                <!-- Readout row -->
                <div class="readout">
                    <div class="readout__digit-wrap">
                        <span class="readout__label">DETECTED</span>
                        <span class="readout__digit" id="predictedDigit">?</span>
                    </div>
                    <div class="readout__conf-wrap">
                        <span class="readout__label">CONFIDENCE</span>
                        <span class="readout__conf" id="confidence">â€”</span>
                    </div>
                    <div class="readout__bars" id="probabilityBars">
                        <!-- JS fills this -->
                    </div>
                </div>

                <!-- Network canvas -->
                <div class="scope">
                    <div class="scope__label">NETWORK â€” 784 â†’ 128 â†’ 64 â†’ 10</div>
                    <div class="scope__screen">
                        <canvas id="networkCanvas" width="900" height="420"></canvas>
                    </div>
                    <div class="scope__legend">
                        <span class="scope__legend-item"><i class="dot dot--on"></i> Active</span>
                        <span class="scope__legend-item"><i class="dot dot--off"></i> Inactive</span>
                    </div>
                </div>
            </div>
        </main>

        <!-- â”€â”€ FOOTER STRIP â”€â”€ -->
        <footer class="strip strip--foot">
            <span>Powered by TensorFlow Â· MNIST Dataset</span>
            <a href="https://github.com/Chronos778/neural-visualizer" target="_blank" rel="noopener">GitHub â†—</a>
        </footer>
    </div>

    <script src="{{ url_for('static', filename='js/network.js') }}"></script>
    <script src="{{ url_for('static', filename='js/visualization.js') }}"></script>
    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>
</html>
